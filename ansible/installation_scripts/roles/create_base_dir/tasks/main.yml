---
- name: Creating the Base Directory for the installation
  file: 
    path: "{{ base_dir }}/cqube"
    owner: "{{ system_user_name }}"
    group: "{{ system_user_name }}"
    recurse: yes
    state: directory

- name: Creating config file
  file:
    path: "{{ base_dir }}/cqube/.cqube_config"
    state: touch
    mode: u+rw,g+rw,o+rw

- name: Loading required data inside config file
  blockinfile:
        path: "{{ base_dir }}/cqube/.cqube_config"
        block: |
               CQUBE_VERSION=1.1
               CQUBE_HOME={{ base_dir }}/cqube
               CQUBE_BASE_DIR={{ base_dir }}
               CQUBE_DB_USER={{ db_user }}
               CQUBE_DB_NAME={{ db_name }}
